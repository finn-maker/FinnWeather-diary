"use strict";(self.webpackChunkweather_diary_react=self.webpackChunkweather_diary_react||[]).push([[914],{1914:(e,t,a)=>{a.r(t),a.d(t,{default:()=>j});var r=a(5043),i=a(6240),l=a(6446),o=a(5865),n=a(6521),s=a(8911),c=a(3845),d=a(1906),u=a(794),m=a(547),h=a(1228),p=a(4596),y=a(4918),x=a(8693),v=a(6892),f=a(4585),g=a(579);const j=e=>{let{weather:t,onSave:a}=e;const[j,A]=(0,r.useState)(""),[b,w]=(0,r.useState)(""),[S,k]=(0,r.useState)(null),[C,_]=(0,r.useState)(!1),z=(0,i.A)();(0,r.useEffect)(()=>{const e=setTimeout(()=>{const e={title:j,content:b,mood:S};localStorage.setItem("diary_draft",JSON.stringify(e))},1e3);return()=>clearTimeout(e)},[j,b,S]),(0,r.useEffect)(()=>{(()=>{const e=localStorage.getItem("diary_draft");if(e)try{const{title:t,content:a,mood:r}=JSON.parse(e);A(t||""),w(a||""),k(r||null)}catch(t){console.error("\u52a0\u8f7d\u8349\u7a3f\u5931\u8d25:",t)}})()},[]);const I=j.trim()&&b.trim()&&S&&t;return(0,g.jsx)(l.A,{children:(0,g.jsxs)(h.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,g.jsx)(o.A,{variant:"h5",gutterBottom:!0,className:"gradient-title",sx:{fontFamily:'"Ma Shan Zheng", cursive'},children:"\ud83d\udcdd \u8bb0\u5f55\u4eca\u5929"}),(0,g.jsx)(o.A,{variant:"body2",color:"text.secondary",mb:3,children:(0,f.$d)()}),(0,g.jsx)(n.A,{fullWidth:!0,label:"\u4eca\u5929\u7684\u6807\u9898",value:j,onChange:e=>A(e.target.value),placeholder:"\u7ed9\u4eca\u5929\u8d77\u4e2a\u6807\u9898\u5427...",variant:"outlined",sx:{mb:3},InputProps:{startAdornment:(0,g.jsx)(p.A,{size:20,style:{marginRight:8,color:z.palette.primary.main}})}}),(0,g.jsx)(n.A,{fullWidth:!0,label:"\u8bb0\u5f55\u4eca\u5929",value:b,onChange:e=>w(e.target.value),placeholder:"\u4eca\u5929\u53d1\u751f\u4e86\u4ec0\u4e48\u6709\u8da3\u7684\u4e8b\u60c5\uff1f\u5fc3\u60c5\u5982\u4f55\uff1f\u548c\u5929\u6c14\u6709\u5173\u7cfb\u5417\uff1f",variant:"outlined",multiline:!0,rows:6,sx:{mb:3}}),(0,g.jsxs)(l.A,{mb:3,children:[(0,g.jsxs)(o.A,{variant:"subtitle1",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,g.jsx)(y.A,{size:20,color:z.palette.primary.main}),"\u4eca\u5929\u5fc3\u60c5\uff1a"]}),(0,g.jsx)(s.A,{direction:"row",spacing:1,flexWrap:"wrap",useFlexGap:!0,children:v.N.map(e=>(0,g.jsx)(h.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,g.jsx)(c.A,{label:`${e.emoji} ${e.label}`,onClick:()=>(e=>{k(e)})(e),variant:(null===S||void 0===S?void 0:S.type)===e.type?"filled":"outlined",color:(null===S||void 0===S?void 0:S.type)===e.type?"primary":"default","data-mood":e.type,sx:{cursor:"pointer",fontSize:"1rem","&:hover":{transform:"scale(1.05)"}}})},e.type))})]}),(0,g.jsx)(h.P.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:(0,g.jsx)(d.A,{fullWidth:!0,variant:"contained",size:"large",onClick:()=>{if(!j.trim()||!b.trim()||!S||!t)return;const e={title:j.trim(),content:b.trim(),mood:{emoji:S.emoji,type:S.type},weather:t};a(e),A(""),w(""),k(null),localStorage.removeItem("diary_draft"),_(!0)},disabled:!I,startIcon:(0,g.jsx)(x.A,{}),sx:{py:1.5,fontSize:"1.1rem",fontWeight:"bold",background:I?`linear-gradient(45deg, ${z.palette.primary.main} 30%, ${z.palette.primary.dark} 90%)`:void 0},children:"\u4fdd\u5b58\u4eca\u5929\u7684\u65e5\u8bb0"})}),(0,g.jsx)(u.A,{open:C,autoHideDuration:3e3,onClose:()=>_(!1),anchorOrigin:{vertical:"top",horizontal:"center"},children:(0,g.jsx)(m.A,{onClose:()=>_(!1),severity:"success",sx:{width:"100%"},children:"\u65e5\u8bb0\u4fdd\u5b58\u6210\u529f\uff01 \u2728"})})]})})}}}]);
//# sourceMappingURL=914.81e0c35d.chunk.js.map