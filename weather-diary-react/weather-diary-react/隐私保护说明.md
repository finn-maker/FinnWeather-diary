# 🔒 天气日记本 - 隐私保护说明

## 🛡️ 隐私保护概述

您的隐私是我们最重要的关注点。我们实现了**端到端加密**技术，确保即使是数据库管理员也无法查看您的日记内容。

## 🔐 加密技术详情

### 加密算法
- **AES-256-GCM**: 军用级对称加密算法
- **PBKDF2**: 密钥派生函数，防止彩虹表攻击
- **随机IV**: 每次加密使用不同的初始化向量

### 密钥管理
- **客户端生成**: 加密密钥仅在您的设备上生成
- **用户ID绑定**: 密钥与您的唯一用户ID关联
- **盐值保护**: 使用固定盐值增强安全性
- **无服务器存储**: 服务器永远无法获取您的加密密钥

## 🔍 加密范围

### ✅ 已加密的数据
- **日记标题**: 完全加密保护
- **日记内容**: 完全加密保护
- **备份文件**: 导出时自动加密

### 📊 未加密的数据
- **心情数据**: 用于统计分析，不包含敏感信息
- **天气数据**: 公开信息，便于数据分析
- **时间戳**: 用于排序和管理
- **用户ID**: 匿名标识符，无个人信息

## 🌐 在线存储安全

### Firebase云端存储
- **加密传输**: 所有数据通过HTTPS安全传输
- **加密存储**: 日记内容在传输前已客户端加密
- **访问控制**: 严格的用户认证和授权
- **数据隔离**: 每个用户的数据完全隔离

### 数据库管理员看到的内容
```json
{
  "id": "abc123",
  "userId": "anonymous-user-xyz",
  "title": "K8yH2mVpQ7F9X3nR5...", // 加密后的内容
  "content": "L9zI3oWqS8G0Y4pT6...", // 加密后的内容
  "mood": {"emoji": "😊", "type": "happy"}, // 明文
  "weather": {"condition": "sunny", "temp": 25}, // 明文
  "timestamp": 1705741800000,
  "encrypted": true
}
```

**管理员无法看到:**
- ❌ 您的真实日记标题
- ❌ 您的真实日记内容
- ❌ 任何个人隐私信息

**管理员可以看到:**
- ✅ 匿名用户ID（无法关联到真实身份）
- ✅ 心情统计数据（用于产品改进）
- ✅ 天气数据（公开信息）
- ✅ 使用时间（用于系统优化）

## 🔧 技术实现

### 客户端加密流程
```
1. 用户输入日记内容
2. 使用PBKDF2生成加密密钥
3. 使用AES-256-GCM加密标题和内容
4. 上传加密后的数据到服务器
5. 服务器存储加密数据（无法解密）
```

### 客户端解密流程
```
1. 从服务器下载加密数据
2. 使用相同的PBKDF2算法重新生成密钥
3. 使用AES-256-GCM解密标题和内容
4. 在客户端显示明文内容
```

### 密钥生成算法
```typescript
// 简化版密钥生成流程
const keyMaterial = PBKDF2(userId + "secret-salt", 100000)
const encryptionKey = AES-256-Key(keyMaterial)
```

## 🛡️ 安全保障

### 端到端加密
- **客户端加密**: 数据在您的设备上加密后才上传
- **服务器无知**: 服务器只存储加密数据，无法获取明文
- **传输安全**: 使用HTTPS保护数据传输
- **存储安全**: 云端只存储加密后的数据

### 密钥安全
- **本地生成**: 密钥永远不会发送到服务器
- **派生算法**: 使用强密码学算法生成密钥
- **盐值保护**: 防止彩虹表和预计算攻击
- **内存清理**: 密钥使用后自动从内存中清除

### 前向安全
- **独立加密**: 每条日记使用独立的随机IV
- **时间隔离**: 即使某次加密被破解，不影响其他日记
- **版本兼容**: 支持加密算法升级和向后兼容

## 📱 不同设备访问

### 密钥同步
- **同一用户**: 不同设备使用相同的用户ID生成相同密钥
- **自动解密**: 在任何设备上都能正确解密您的日记
- **无需同步**: 不需要手动同步密钥，算法保证一致性

### 设备丢失
- **数据安全**: 即使设备丢失，云端数据仍然是加密的
- **无法访问**: 他人无法获取您的加密密钥
- **新设备恢复**: 在新设备上重新登录即可访问加密数据

## 🔍 隐私等级对比

### 本应用（端到端加密）
- 🟢 **用户可见**: 完整的日记内容
- 🟡 **管理员可见**: 匿名统计数据（心情、天气）
- 🔴 **管理员不可见**: 日记标题、内容、任何个人信息

### 传统应用（明文存储）
- 🟢 **用户可见**: 完整的日记内容
- 🔴 **管理员可见**: 完整的日记内容、个人信息、使用习惯
- ⚠️ **风险**: 数据泄露、隐私侵犯、商业利用

### 完全本地应用
- 🟢 **用户可见**: 完整的日记内容
- 🟢 **管理员不可见**: 任何数据
- ⚠️ **风险**: 设备丢失数据全部丢失、无备份、无同步

## 🔒 最佳实践建议

### 账户安全
- 使用强壮的设备锁屏密码
- 定期更新浏览器到最新版本
- 避免在公共设备上长期登录

### 数据备份
- 定期使用应用的加密备份功能
- 将备份文件保存在安全的位置
- 备份文件同样采用端到端加密

### 隐私设置
- 定期检查隐私状态指示器
- 了解哪些数据被加密，哪些没有
- 根据需要调整隐私保护级别

## ❓ 常见问题

### Q: 如果忘记密码会怎样？
A: 我们使用匿名认证，没有传统密码。如果清除浏览器数据，可能需要重新开始。建议定期备份。

### Q: 加密会影响性能吗？
A: 现代浏览器的加密性能很好，对用户体验影响极小。

### Q: 可以关闭加密吗？
A: 为了保护您的隐私，我们强制启用加密。如果浏览器不支持，会显示相应提示。

### Q: 如何验证数据确实被加密？
A: 可以查看浏览器开发者工具的网络请求，看到的是加密后的数据。

### Q: 政府或执法部门能获取数据吗？
A: 即使面临法律要求，我们也只能提供加密后的数据，无法提供明文内容。

### Q: 心情和天气数据为什么不加密？
A: 这些数据不包含敏感个人信息，保持明文有利于提供统计功能和改进用户体验。

### Q: 如何确保加密算法的安全性？
A: 我们使用行业标准的AES-256-GCM算法，这是被广泛认可的军用级加密标准。

## 🎯 隐私承诺

我们承诺：
- ✅ 永远不会读取您的加密日记内容
- ✅ 永远不会将您的个人数据出售给第三方
- ✅ 持续改进和加强隐私保护技术
- ✅ 保持透明，及时告知任何隐私政策变更
- ✅ 遵守所有适用的数据保护法律法规

## 📞 联系我们

如果您对隐私保护有任何疑问或建议：
- 通过应用内反馈功能联系我们
- 我们重视每一个隐私相关的问题
- 会及时回应并不断改进保护措施

---

**最后更新**: 2025年1月20日  
**加密版本**: v2.1.0  
**隐私等级**: 端到端加密 🔒 